{"ast":null,"code":"import axios from\"axios\";import setAuthToken from\"../utils/setAuthToken\";import jwt_decode from\"jwt-decode\";import{GET_ERRORS,SET_CURRENT_USER,USER_LOADING}from\"./types\";// Register User\nexport var registerUser=function registerUser(userData,history){return function(dispatch){axios.post(\"/api/users/register\",userData).then(function(res){return history.push(\"/login\");})// re-direct to login on successful register\n.catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};// Login - get user token\nexport var loginUser=function loginUser(userData){return function(dispatch){axios.post(\"/api/users/login\",userData).then(function(res){var token=res.data.token;// Save to localStorage\nlocalStorage.setItem(\"jwtToken\",token);// Set token to localStorage\nsetAuthToken(token);// Set token to Auth header\nvar decoded=jwt_decode(token);// Decode token to get user data\ndispatch(setCurrentUser(decoded));// Set current user\n}).catch(function(err){return dispatch({type:GET_ERRORS,payload:err.response.data});});};};// Set logged in user\nexport var setCurrentUser=function setCurrentUser(decoded){return{type:SET_CURRENT_USER,payload:decoded};};// User loading\nexport var setUserLoading=function setUserLoading(){return{type:USER_LOADING};};// Log user out\nexport var logoutUser=function logoutUser(){return function(dispatch){localStorage.removeItem(\"jwtToken\");// Remove token from local storage\nsetAuthToken(false);// Remove auth header for future requests\ndispatch(setCurrentUser({}));// Set current user to empty object {} which will set isAuthenticated to false\n};};","map":{"version":3,"sources":["/home/jasonw/Desktop/React/bugtracker/client/src/actions/authActions.js"],"names":["axios","setAuthToken","jwt_decode","GET_ERRORS","SET_CURRENT_USER","USER_LOADING","registerUser","userData","history","dispatch","post","then","res","push","catch","err","type","payload","response","data","loginUser","token","localStorage","setItem","decoded","setCurrentUser","setUserLoading","logoutUser","removeItem"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,MAAOC,CAAAA,UAAP,KAAuB,YAAvB,CAEA,OACIC,UADJ,CAEIC,gBAFJ,CAGIC,YAHJ,KAIO,SAJP,CAKA;AAEA,MAAO,IAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAACC,QAAD,CAAWC,OAAX,QAAuB,UAAAC,QAAQ,CAAI,CAC3DT,KAAK,CACAU,IADL,CACU,qBADV,CACiCH,QADjC,EAEKI,IAFL,CAEU,SAAAC,GAAG,QAAIJ,CAAAA,OAAO,CAACK,IAAR,CAAa,QAAb,CAAJ,EAFb,CAEyC;AAFzC,CAGKC,KAHL,CAGW,SAAAC,GAAG,QACVN,CAAAA,QAAQ,CAAC,CACLO,IAAI,CAAEb,UADD,CAELc,OAAO,CAAEF,GAAG,CAACG,QAAJ,CAAaC,IAFjB,CAAD,CADE,EAHd,EASH,CAV2B,EAArB,CAWP;AACA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAAAb,QAAQ,QAAI,UAAAE,QAAQ,CAAI,CAC7CT,KAAK,CACAU,IADL,CACU,kBADV,CAC8BH,QAD9B,EAEKI,IAFL,CAEU,SAAAC,GAAG,CAAI,IAEDS,CAAAA,KAFC,CAEST,GAAG,CAACO,IAFb,CAEDE,KAFC,CAE+B;AACxCC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAiCF,KAAjC,EAA4C;AAE5CpB,YAAY,CAACoB,KAAD,CAAZ,CAA4B;AAE5B,GAAMG,CAAAA,OAAO,CAAGtB,UAAU,CAACmB,KAAD,CAA1B,CAAoC;AAEpCZ,QAAQ,CAACgB,cAAc,CAACD,OAAD,CAAf,CAAR,CAAoC;AACvC,CAZL,EAaKV,KAbL,CAaW,SAAAC,GAAG,QACVN,CAAAA,QAAQ,CAAC,CACLO,IAAI,CAAEb,UADD,CAELc,OAAO,CAAEF,GAAG,CAACG,QAAJ,CAAaC,IAFjB,CAAD,CADE,EAbd,EAmBC,CApB4B,EAA1B,CAqBH;AACA,MAAO,IAAMM,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAAAD,OAAO,CAAI,CACzC,MAAO,CACHR,IAAI,CAAEZ,gBADH,CAEHa,OAAO,CAAEO,OAFN,CAAP,CAIC,CALM,CAMP;AACA,MAAO,IAAME,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACpC,MAAO,CACHV,IAAI,CAAEX,YADH,CAAP,CAGC,CAJM,CAKP;AACA,MAAO,IAAMsB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,SAAM,UAAAlB,QAAQ,CAAI,CAE5Ca,YAAY,CAACM,UAAb,CAAwB,UAAxB,EAAgD;AAEhD3B,YAAY,CAAC,KAAD,CAAZ,CAA4B;AAE5BQ,QAAQ,CAACgB,cAAc,CAAC,EAAD,CAAf,CAAR,CAAqC;AAEpC,CARyB,EAAnB","sourcesContent":["import axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport jwt_decode from \"jwt-decode\";\n\nimport {\n    GET_ERRORS,\n    SET_CURRENT_USER,\n    USER_LOADING\n} from \"./types\";\n// Register User\n\nexport const registerUser = (userData, history) => dispatch => {\n    axios\n        .post(\"/api/users/register\", userData)\n        .then(res => history.push(\"/login\")) // re-direct to login on successful register\n        .catch(err =>\n        dispatch({\n            type: GET_ERRORS,\n            payload: err.response.data\n        })\n        );\n};\n// Login - get user token\nexport const loginUser = userData => dispatch => {\n    axios\n        .post(\"/api/users/login\", userData)\n        .then(res => {\n\n            const { token } = res.data;             // Save to localStorage\n            localStorage.setItem(\"jwtToken\", token);    // Set token to localStorage\n            \n            setAuthToken(token);        // Set token to Auth header\n            \n            const decoded = jwt_decode(token);  // Decode token to get user data\n            \n            dispatch(setCurrentUser(decoded));  // Set current user\n        })\n        .catch(err =>\n        dispatch({\n            type: GET_ERRORS,\n            payload: err.response.data\n        })\n        );\n    };\n    // Set logged in user\n    export const setCurrentUser = decoded => {\n    return {\n        type: SET_CURRENT_USER,\n        payload: decoded\n    };\n    };\n    // User loading\n    export const setUserLoading = () => {\n    return {\n        type: USER_LOADING\n    };\n    };\n    // Log user out\n    export const logoutUser = () => dispatch => {\n    \n    localStorage.removeItem(\"jwtToken\");            // Remove token from local storage\n    \n    setAuthToken(false);        // Remove auth header for future requests\n   \n    dispatch(setCurrentUser({}));        // Set current user to empty object {} which will set isAuthenticated to false\n    \n    };"]},"metadata":{},"sourceType":"module"}