{"ast":null,"code":"import _slicedToArray from \"/home/jasonw/Desktop/React/bugtracker/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/home/jasonw/Desktop/React/bugtracker/src/components/usersProfile/editUsers.component.js\";\nimport React, { Component } from 'react';\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport axios from 'axios';\nimport Avatar from 'react-avatar-edit';\nimport { setUserLoading } from '../../actions/authActions';\nexport default class EditUsers extends Component {\n  constructor(props) {\n    super(props);\n\n    this.fileSelectedHandler = event => {\n      console.log(event);\n      this.setState({\n        profileImg: event.target.files[0]\n      });\n    };\n\n    this.state = {\n      name: '',\n      email: '',\n      role: '',\n      date: new Date(),\n      profileImg: null,\n      preview: null\n    };\n    this.onChangeName = this.onChangeName.bind(this);\n    this.onChangeEmail = this.onChangeEmail.bind(this);\n    this.onChangeRole = this.onChangeRole.bind(this);\n    this.onChangeDate = this.onChangeDate.bind(this);\n    this.onCrop = this.onCrop.bind(this);\n    this.onClose = this.onClose.bind(this);\n    this.onBeforeFileLoad = this.onBeforeFileLoad.bind(this);\n    this.onSubmitForm = this.onSubmitForm.bind(this);\n    this.uploadImage = this.uploadImage.bind(this);\n  } // Get a single project record\n\n\n  componentDidMount() {\n    axios.get('http://localhost:4000/api/users/' + this.props.match.params.id).then(res => {\n      this.setState({\n        name: res.data.name,\n        email: res.data.email,\n        role: res.data.role,\n        date: new Date(res.data.date)\n      });\n      console.log(\"retrieved info: \" + res.data);\n    }).catch(function (error) {\n      console.log(\"Error \" + error);\n    });\n  }\n\n  onChangeName(e) {\n    this.setState({\n      name: e.target.value\n    });\n  }\n\n  onChangeEmail(e) {\n    this.setState({\n      email: e.target.value\n    });\n  }\n\n  onChangeRole(e) {\n    this.setState({\n      role: e.target.value\n    });\n  }\n\n  onChangeDate(date) {\n    this.setState({\n      date: date\n    });\n  }\n\n  onClose() {\n    this.setState({\n      preview: null\n    });\n  }\n\n  onCrop(preview) {\n    this.setState({\n      preview\n    });\n  }\n\n  onBeforeFileLoad(elem) {\n    if (elem.target.files[0].size > 71680) {\n      alert(\"File is too big!\");\n      elem.target.value = \"\";\n    }\n\n    ;\n  } // fileUploadHandler = () = {\n  //     axios\n  // }\n\n\n  onSubmitForm(e) {\n    e.preventDefault();\n    console.log(\"form submitted\");\n    console.log(`name: ${this.state.name}`);\n    console.log(`date: ${this.state.date}`);\n    console.log(`email: ${this.state.email}`);\n    console.log(`role: ${this.state.role}`);\n    const updatedUser = {\n      name: this.state.name,\n      email: this.state.email,\n      role: this.state.role,\n      date: this.state.date,\n      profileImg: this.state.preview\n    };\n\n    uploadImage = async e => {\n      const files = e.target.files;\n      const data = new FormData();\n      data.append('file', files[0]);\n      data.append('upload_preset', 'fahi8ukz');\n      setUserLoading(true);\n      const res = await fetch('https://api.cloudinary.com/v1_1/draeokkz7/image/upload', {\n        method: 'POST',\n        body: data\n      });\n      const file = await res.json();\n      setImagea(file.secure_url);\n      setLoading(false);\n    }; //Update a new project\n\n\n    axios.patch('http://localhost:4000/api/users/' + this.props.match.params.id, updatedUser).then(res => console.log(res.data), this.props.history.push(\"/usersList\"));\n  }\n\n  render() {\n    const _useState = useState(''),\n          _useState2 = _slicedToArray(_useState, 2),\n          image = _useState2[0],\n          setImage = _useState2[1];\n\n    const _useState3 = useState(false),\n          _useState4 = _slicedToArray(_useState3, 2),\n          loading = _useState4[0],\n          setLoading = _useState4[1];\n\n    return React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, \"Update a User\"), React.createElement(\"div\", {\n      style: {\n        marginTop: 20\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.onSubmitForm,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, \"Name: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.name,\n      onChange: this.onChangeName,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    })), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 172\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, \"Role: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.role,\n      onChange: this.onChangeRole,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"input\", {\n      type: \"text\",\n      className: \"form-control\",\n      value: this.state.email,\n      onChange: this.onChangeEmail,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 186\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Avatar, {\n      width: 250,\n      height: 250,\n      onCrop: this.onCrop,\n      onClose: this.onClose,\n      onBefore: this.onBeforeFileLoad,\n      profileImg: this.state.profileImg,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }), React.createElement(\"img\", {\n      src: this.state.preview,\n      alt: \"Preview\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    })), React.createElement(\"input\", {\n      type: \"file\",\n      placeholder: \"Upload an image\",\n      onChange: this.uploadImage,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), loading ? React.createElement(\"h3\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 221\n      },\n      __self: this\n    }, \"Loading....\") : React.createElement(\"img\", {\n      src: image,\n      style: {\n        width: '300px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"submit\",\n      value: \"Update User\",\n      className: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    })))));\n  }\n\n}","map":{"version":3,"sources":["/home/jasonw/Desktop/React/bugtracker/src/components/usersProfile/editUsers.component.js"],"names":["React","Component","axios","Avatar","setUserLoading","EditUsers","constructor","props","fileSelectedHandler","event","console","log","setState","profileImg","target","files","state","name","email","role","date","Date","preview","onChangeName","bind","onChangeEmail","onChangeRole","onChangeDate","onCrop","onClose","onBeforeFileLoad","onSubmitForm","uploadImage","componentDidMount","get","match","params","id","then","res","data","catch","error","e","value","elem","size","alert","preventDefault","updatedUser","FormData","append","fetch","method","body","file","json","setImagea","secure_url","setLoading","patch","history","push","render","useState","image","setImage","loading","marginTop","width"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport axios from 'axios';\nimport Avatar from 'react-avatar-edit'\nimport { setUserLoading } from '../../actions/authActions';\nexport default class EditUsers extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '',\n            email: '',\n            role: '',\n            date: new Date(),\n            profileImg: null,\n            preview: null\n\n        }\n        \n        this.onChangeName = this.onChangeName.bind(this);\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onChangeRole = this.onChangeRole.bind(this);\n        this.onChangeDate = this.onChangeDate.bind(this);\n        \n        this.onCrop = this.onCrop.bind(this);\n        this.onClose = this.onClose.bind(this);\n        this.onBeforeFileLoad = this.onBeforeFileLoad.bind(this);\n        this.onSubmitForm = this.onSubmitForm.bind(this);\n        this.uploadImage = this.uploadImage.bind(this);\n        \n    }\n// Get a single project record\n    componentDidMount() {\n\n        axios.get('http://localhost:4000/api/users/'+this.props.match.params.id)\n            .then(res => {\n                this.setState({\n                    name: res.data.name,\n                    email: res.data.email,\n                    role: res.data.role,\n                    date: new Date(res.data.date)\n                })\n                console.log(\"retrieved info: \" +res.data)\n            })\n            .catch(function(error) {\n                console.log(\"Error \" + error)\n            })\n    }\n\n    onChangeName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n\n\n    onChangeEmail(e) {\n        this.setState({\n            email: e.target.value\n        });\n    }\n\n    onChangeRole(e) {\n        this.setState({\n            role: e.target.value\n        });\n    }\n\n    onChangeDate(date) {\n\n        this.setState({\n            date: date\n        });\n    }\n\n    \n\n    fileSelectedHandler = event => {\n        console.log(event)\n        this.setState({\n            profileImg: event.target.files[0]\n            \n        })\n        \n    }\n    onClose() {\n        this.setState({preview: null})\n      }\n      \n      onCrop(preview) {\n        this.setState({preview})\n      }\n    \n      onBeforeFileLoad(elem) {\n        if(elem.target.files[0].size > 71680){\n          alert(\"File is too big!\");\n          elem.target.value = \"\";\n        };\n      }\n\n    // fileUploadHandler = () = {\n    //     axios\n    // }\n\n    onSubmitForm(e) {\n        e.preventDefault();\n\n        console.log(\"form submitted\");\n        console.log(`name: ${this.state.name}`);\n        console.log(`date: ${this.state.date}`);\n        console.log(`email: ${this.state.email}`);\n        console.log(`role: ${this.state.role}`);\n\n        const updatedUser = {\n            name: this.state.name,\n            email: this.state.email,\n            role: this.state.role,\n            date: this.state.date,\n            profileImg: this.state.preview\n\n        }\n\n        uploadImage = async e => {\n            const files = e.target.files\n            const data = new FormData()\n            data.append('file',files[0])\n            data.append('upload_preset','fahi8ukz')\n            setUserLoading(true);\n            const res = await fetch(\n                'https://api.cloudinary.com/v1_1/draeokkz7/image/upload',\n                {\n                    method: 'POST',\n                    body: data\n                }\n\n            )\n            const file = await res.json()\n\n            setImagea(file.secure_url)\n            setLoading(false);\n        }\n\n\n        //Update a new project\n        axios.patch('http://localhost:4000/api/users/'+this.props.match.params.id,updatedUser)\n            .then(res => console.log(res.data),\n            this.props.history.push(\"/usersList\"));\n            \n    \n\n    }\n\n    render() {\n\n        const [image, setImage] = useState('');\n        const [loading, setLoading] = useState(false);\n        return (\n            <div className=\"container\">\n                <h3>Update a User</h3>\n                <div style={{marginTop: 20}}>\n                    <form onSubmit={this.onSubmitForm}>\n                        <div className=\"form-group\">\n                            <label>Name: </label>\n                            <input type=\"text\"\n                                    className=\"form-control\"\n                                    value={this.state.name}\n                                    onChange={this.onChangeName}\n                                />\n                        </div>\n\n\n                        <br />\n                        <div className=\"form-group\">\n                            <label>Role: </label>\n                            <input type=\"text\"\n                                    className=\"form-control\"\n                                    value={this.state.role}\n                                    onChange={this.onChangeRole}\n                                />\n                        </div>\n                        \n            \n\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input type=\"text\"\n                                    className=\"form-control\"\n                                    value={this.state.email}\n                                    onChange={this.onChangeEmail}\n                                />\n                        </div>\n\n                        {/* <div className=\"form-group\">\n                            <label>Upload a Profile Image:</label>\n                            <br />\n                            <input type=\"file\" \n                                \n                                onChange={this.fileSelectedHandler} />\n                            \n                        </div> */}\n                        <div className=\"form-group\">\n\n                        \n                        <Avatar\n                            width={250}\n                            height={250}\n                            onCrop={this.onCrop}\n                            onClose={this.onClose}\n                            onBefore={this.onBeforeFileLoad}\n                            profileImg={this.state.profileImg}\n                        />\n                            <img src={this.state.preview} alt=\"Preview\" />\n                        \n                        </div>\n\n                        <input type=\"file\"\n                            placeholder=\"Upload an image\"\n                            onChange={this.uploadImage} />\n\n                        {loading ? (\n                            <h3>Loading....</h3>\n                        ): (<img src={image} style={{width: '300px'}} />\n                        )}\n\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Update User\" className=\"btn btn-primary\" />\n                        </div>\n                        \n                    </form>\n                    \n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}