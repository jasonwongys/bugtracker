{"ast":null,"code":"var _jsxFileName = \"/home/jasonw/Desktop/React/bugtracker/src/components/login.component.js\";\nimport React, { Component } from 'react';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport './login.component.css';\nimport { setInStorage, getFromStorage } from '../config/utils/storage';\nimport axios from 'axios';\nexport default class Login extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      isLoading: true,\n      token: '',\n      signUpError: '',\n      signInError: '',\n      signInEmail: '',\n      signInPassword: '',\n      signUpEmail: '',\n      signUpPassword: ''\n    };\n    this.onTextboxChangeSignInEmail = this.onTextboxChangeSignInEmail.bind(this);\n    this.onTextboxChangeSignInPassword = this.onTextboxChangeSignInPassword.bind(this);\n    this.onTextboxChangeSignUpEmail = this.onTextboxChangeSignUpEmail.bind(this);\n    this.onTextboxChangeSignUpPassword = this.onTextboxChangeSignUpPassword.bind(this);\n    this.onSignUp = this.onSignUp.bind(this);\n    this.onSignIn = this.onSignIn.bind(this);\n    this.logout = this.logout.bind(this);\n  }\n\n  componentDidMount() {\n    const obj = getFromStorage('the_main_app');\n\n    if (obj && obj.token) {\n      console.log('Object: ' + obj);\n      console.log('Token: ' + obj.token);\n      const token = obj.token; // Verify token\n\n      fetch('/api/account/verify?token=' + token).then(res => res.json()).then(json => {\n        if (json.success) {\n          this.setState({\n            token,\n            isLoading: false\n          });\n        } else {\n          this.setState({\n            isLoading: false\n          });\n        }\n      });\n    } else {\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n\n  onTextboxChangeSignInEmail(event) {\n    this.setState({\n      signInEmail: event.target.value\n    });\n  }\n\n  onTextboxChangeSignInPassword(event) {\n    this.setState({\n      signInPassword: event.target.value\n    });\n  }\n\n  onTextboxChangeSignUpEmail(event) {\n    this.setState({\n      signUpEmail: event.target.value\n    });\n  }\n\n  onTextboxChangeSignUpPassword(event) {\n    this.setState({\n      signUpPassword: event.target.value\n    });\n  }\n\n  onSignUp(e) {\n    e.preventDefault();\n    const newUser = {\n      signUpEmail: this.state.signUpEmail,\n      signUpPassword: this.state.signUpPassword\n    };\n    this.setState({\n      isLoading: true\n    }); // Post request to backend\n\n    axios.post('http://localhost:4000/bugs/api/account/signup/', newUser).then(res => console.log(res.data));\n    this.setState({\n      isLoading: false,\n      signUpEmail: '',\n      signUpPassword: ''\n    });\n  }\n\n  onSignIn() {\n    // Grab state\n    const _this$state = this.state,\n          signInEmail = _this$state.signInEmail,\n          signInPassword = _this$state.signInPassword;\n    this.setState({\n      isLoading: true\n    }); // Post request to backend\n\n    fetch('/api/account/signin/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        email: signInEmail,\n        password: signInPassword\n      })\n    }).then(res => res.json()).then(json => {\n      console.log('json', json);\n\n      if (json.success) {\n        setInStorage('the_main_app', {\n          token: json.token\n        });\n        this.setState({\n          signInError: json.message,\n          isLoading: false,\n          signInPassword: '',\n          signInEmail: '',\n          token: json.token\n        });\n      } else {\n        this.setState({\n          signInError: json.message,\n          isLoading: false\n        });\n      }\n    });\n  }\n\n  logout() {\n    this.setState({\n      isLoading: true\n    });\n    const obj = getFromStorage('the_main_app');\n\n    if (obj && obj.token) {\n      const token = obj.token; // Verify token\n\n      fetch('/api/account/logout?token=' + token).then(res => res.json()).then(json => {\n        if (json.success) {\n          this.setState({\n            token: '',\n            isLoading: false\n          });\n        } else {\n          this.setState({\n            isLoading: false\n          });\n        }\n      });\n    } else {\n      this.setState({\n        isLoading: false\n      });\n    }\n  }\n\n  render() {\n    const _this$state2 = this.state,\n          isLoading = _this$state2.isLoading,\n          token = _this$state2.token,\n          signInError = _this$state2.signInError,\n          signInEmail = _this$state2.signInEmail,\n          signInPassword = _this$state2.signInPassword,\n          signUpEmail = _this$state2.signUpEmail,\n          signUpPassword = _this$state2.signUpPassword,\n          signUpError = _this$state2.signUpError;\n\n    if (isLoading) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191\n        },\n        __self: this\n      }, \"Loading...\"));\n    }\n\n    if (!token) {\n      return React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 196\n        },\n        __self: this\n      }, signInError ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 198\n        },\n        __self: this\n      }, signInError) : null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 200\n        },\n        __self: this\n      }, \"Sign In\"), React.createElement(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: signInEmail,\n        onChange: this.onTextboxChangeSignInEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 201\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: signInPassword,\n        onChange: this.onTextboxChangeSignInPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 208\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.onSignIn,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 215\n        },\n        __self: this\n      }, \"Sign In\")), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 217\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 218\n        },\n        __self: this\n      }), React.createElement(\"div\", {\n        className: \"form-group\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219\n        },\n        __self: this\n      }, signUpError ? React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 221\n        },\n        __self: this\n      }, signUpError) : null, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223\n        },\n        __self: this\n      }, \"Sign Up\"), React.createElement(\"input\", {\n        type: \"email\",\n        placeholder: \"Email\",\n        value: this.state.signUpEmail,\n        onChange: this.onTextboxChangeSignUpEmail,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        type: \"password\",\n        placeholder: \"Password\",\n        value: this.state.signUpPassword,\n        onChange: this.onTextboxChangeSignUpPassword,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }), React.createElement(\"br\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        onClick: this.onSignUp,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238\n        },\n        __self: this\n      }, \"Sign Up\")));\n    }\n\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row no-gutter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"d-none d-md-flex col-md-4 col-lg-6 bg-image\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-md-8 col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login d-flex align-items-center py-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 251\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-9 col-lg-8 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(\"h3\", {\n      className: \"login-heading mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, \"Welcome back!\"), React.createElement(\"form\", {\n      action: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 254\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 255\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"email\",\n      id: \"inputEmail\",\n      className: \"form-control\",\n      placeholder: \"Email address\",\n      required: true,\n      autofocus: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 256\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"inputEmail\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 257\n      },\n      __self: this\n    }, \"Email address\")), React.createElement(\"div\", {\n      className: \"form-label-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 260\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"password\",\n      id: \"inputPassword\",\n      className: \"form-control\",\n      placeholder: \"Password\",\n      required: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"inputPassword\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, \"Password\")), React.createElement(\"div\", {\n      className: \"custom-control custom-checkbox mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 265\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"checkbox\",\n      className: \"custom-control-input\",\n      id: \"customCheck1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 266\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"custom-control-label\",\n      for: \"customCheck1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 267\n      },\n      __self: this\n    }, \"Remember password\")), React.createElement(\"button\", {\n      className: \"btn btn-lg btn-primary btn-block btn-login text-uppercase font-weight-bold mb-2\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 269\n      },\n      __self: this\n    }, \"Sign in\"), React.createElement(\"div\", {\n      className: \"text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"small\",\n      href: \"#\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 271\n      },\n      __self: this\n    }, \"Forgot password?\"))))))))));\n  }\n\n}","map":{"version":3,"sources":["/home/jasonw/Desktop/React/bugtracker/src/components/login.component.js"],"names":["React","Component","setInStorage","getFromStorage","axios","Login","constructor","props","state","isLoading","token","signUpError","signInError","signInEmail","signInPassword","signUpEmail","signUpPassword","onTextboxChangeSignInEmail","bind","onTextboxChangeSignInPassword","onTextboxChangeSignUpEmail","onTextboxChangeSignUpPassword","onSignUp","onSignIn","logout","componentDidMount","obj","console","log","fetch","then","res","json","success","setState","event","target","value","e","preventDefault","newUser","post","data","method","headers","body","JSON","stringify","email","password","message","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport './login.component.css';\nimport {\n    setInStorage,\n    getFromStorage,\n} from '../config/utils/storage'\nimport axios from 'axios';\n\nexport default class Login extends Component {\n    constructor(props) {\n    super(props);\n\n    this.state = {\n        isLoading: true,\n        token: '',\n        signUpError: '',\n        signInError: '',\n        signInEmail: '',\n        signInPassword: '',\n        signUpEmail: '',\n        signUpPassword: '',\n    };\n\n    this.onTextboxChangeSignInEmail = this.onTextboxChangeSignInEmail.bind(this);\n    this.onTextboxChangeSignInPassword = this.onTextboxChangeSignInPassword.bind(this);\n    this.onTextboxChangeSignUpEmail = this.onTextboxChangeSignUpEmail.bind(this);\n    this.onTextboxChangeSignUpPassword = this.onTextboxChangeSignUpPassword.bind(this);\n    this.onSignUp = this.onSignUp.bind(this);\n    this.onSignIn = this.onSignIn.bind(this);\n    this.logout = this.logout.bind(this);\n}\n\ncomponentDidMount() {\n    const obj = getFromStorage('the_main_app');\n        if (obj && obj.token) {\n            console.log('Object: ' + obj);\n            console.log('Token: ' + obj.token);\n            const { token } = obj;\n        // Verify token\n        fetch('/api/account/verify?token=' + token)\n            .then(res => res.json())\n            .then(json => {\n            if (json.success) {\n                this.setState({\n                    token,\n                    isLoading: false\n                });\n            } else {\n                this.setState({\n                isLoading: false,\n                });\n            }\n        });\n} else {\n    this.setState({\n        isLoading: false\n    });\n}\n}\n\nonTextboxChangeSignInEmail(event) {\n    this.setState({\n        signInEmail: event.target.value\n    });\n}\n\nonTextboxChangeSignInPassword(event) {\n    this.setState({\n        signInPassword: event.target.value\n    });\n}\n\nonTextboxChangeSignUpEmail(event) {\n    this.setState({\n        signUpEmail: event.target.value\n    });\n}\n\nonTextboxChangeSignUpPassword(event) {\n    this.setState({\n        signUpPassword: event.target.value\n    });\n}\n\nonSignUp(e) {\n    e.preventDefault();\n\n    const newUser = {\n        signUpEmail: this.state.signUpEmail,\n        signUpPassword: this.state.signUpPassword\n    }\n\n    this.setState({\n        isLoading: true\n    });\n      // Post request to backend\n    axios.post('http://localhost:4000/bugs/api/account/signup/', newUser)\n            .then(res => console.log(res.data));\n\n            this.setState({\n                \n                isLoading: false,\n                signUpEmail: '',\n                signUpPassword: ''\n            });\n            \n            \n}\n\n\n    onSignIn() {\n            // Grab state\n            const { signInEmail, signInPassword } = this.state;\n            this.setState({\n                isLoading: true\n            }); \n            // Post request to backend\n            fetch('/api/account/signin/', {\n                method: 'POST',\n                headers: {\n                    'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                email: signInEmail,\n                password: signInPassword,\n            }),\n            }).then(res => res.json())\n            .then(json => {\n                console.log('json', json);\n                if (json.success) {\n                    setInStorage('the_main_app', { token: json.token });\n                this.setState({\n                    signInError: json.message,\n                    isLoading: false,\n                    signInPassword: '',\n                    signInEmail: '',\n                    token: json.token\n                });\n                } else {\n                this.setState({\n                    signInError: json.message,\n                    isLoading: false\n                });\n                }\n            });\n        }\n\n        logout() {\n            this.setState({\n                isLoading: true,\n                });\n                const obj = getFromStorage('the_main_app');\n                if (obj && obj.token) {\n                const { token } = obj;\n                // Verify token\n                fetch('/api/account/logout?token=' + token)\n                    .then(res => res.json())\n                    .then(json => {\n                    if (json.success) {\n                        this.setState({\n                        token: '',\n                        isLoading: false\n                        });\n                    } else {\n                        this.setState({\n                        isLoading: false,\n                        });\n                    }\n                    });\n                } else {\n                this.setState({\n                    isLoading: false,\n                });\n                }\n            }\n\nrender() {\n        const {\n        isLoading,\n        token,\n        signInError,\n        signInEmail,\n        signInPassword,\n        signUpEmail,\n        signUpPassword,\n        signUpError\n        } = this.state;\n        \n        if (isLoading) {\n            return (<div><p>Loading...</p></div>);\n        }\n        if (!token) {\n        return (\n            <div>\n            <div>\n                {\n                    (signInError) ? (<p>{signInError}</p>) : (null)\n                }\n                <p>Sign In</p>\n                <input\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    value={signInEmail}\n                    onChange={this.onTextboxChangeSignInEmail}\n                />\n                <br />\n                <input\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    value={signInPassword}\n                    onChange={this.onTextboxChangeSignInPassword}\n                />\n                <br />\n                <button onClick={this.onSignIn}>Sign In</button>\n            </div>\n            <br />\n            <br />\n            <div className=\"form-group\">\n                {\n                    (signUpError) ? (<p>{signUpError}</p>) : (null)\n                }\n                <p>Sign Up</p>\n                <input\n                    type=\"email\"\n                    placeholder=\"Email\"\n                    value={this.state.signUpEmail}\n                    onChange={this.onTextboxChangeSignUpEmail}\n                />\n                <br />\n                <input\n                    type=\"password\"\n                    placeholder=\"Password\"\n                    value={this.state.signUpPassword}\n                    onChange={this.onTextboxChangeSignUpPassword}\n                />\n                <br />\n                <button onClick={this.onSignUp}>Sign Up</button>\n                \n            </div>\n        </div>\n        );\n            }\n            return (\n                <div className=\"container-fluid\">\n                <div className=\"row no-gutter\">\n                    <div className=\"d-none d-md-flex col-md-4 col-lg-6 bg-image\"></div>\n                <div className=\"col-md-8 col-lg-6\">\n                    <div className=\"login d-flex align-items-center py-5\">\n                        <div className=\"container\">\n                <div className=\"row\">\n                <div className=\"col-md-9 col-lg-8 mx-auto\">\n                <h3 className=\"login-heading mb-4\">Welcome back!</h3>\n                <form action=\"\">\n                    <div className=\"form-label-group\">\n                    <input type=\"email\" id=\"inputEmail\" className=\"form-control\" placeholder=\"Email address\" required autofocus />\n                    <label for=\"inputEmail\">Email address</label>\n                    </div>\n\n                    <div className=\"form-label-group\">\n                    <input type=\"password\" id=\"inputPassword\" className=\"form-control\" placeholder=\"Password\" required />\n                    <label for=\"inputPassword\">Password</label>\n                    </div>\n\n                    <div className=\"custom-control custom-checkbox mb-3\">\n                    <input type=\"checkbox\" className=\"custom-control-input\" id=\"customCheck1\" />\n                    <label className=\"custom-control-label\" for=\"customCheck1\">Remember password</label>\n                    </div>\n                    <button className=\"btn btn-lg btn-primary btn-block btn-login text-uppercase font-weight-bold mb-2\" type=\"submit\">Sign in</button>\n                    <div className=\"text-center\">\n                    <a className=\"small\" href=\"#\">Forgot password?</a></div>\n                </form>\n                </div>\n            </div>\n            </div>\n        </div>\n        </div>\n    </div>\n    </div>\n            )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}