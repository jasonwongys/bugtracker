{"ast":null,"code":"import _classCallCheck from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Link}from'react-router-dom';import axios from'axios';import{connect}from\"react-redux\";//import jwt from 'jsonwebtokens'\nvar Project=function Project(props){return React.createElement(\"tr\",null,React.createElement(\"td\",null,props.project.projectName),React.createElement(\"td\",null,props.project.description),React.createElement(\"td\",null,props.project.members),React.createElement(\"td\",null,new Intl.DateTimeFormat(\"en-GB\",{year:\"numeric\",month:\"long\",day:\"2-digit\"}).format(new Date(props.date))),React.createElement(\"td\",null,React.createElement(Link,{to:\"/editProj/\"+props.project._id,className:\"btn btn-success\"},\"Edit \"),\" \",React.createElement(Link,{to:\"/projects/bugs/\"+props.project._id,className:\"btn btn-primary\"},\"Add bug \"),\" \",React.createElement(Link,{to:\"/bugs/\"+props.project._id,className:\"btn btn-info\"},\" View Bugs\"),\" \",React.createElement(Link,{className:\"btn btn-danger\",onClick:function onClick(){props.deleteProject(props.project._id);}},\" Delete\")));};var Projects=/*#__PURE__*/function(_Component){_inherits(Projects,_Component);function Projects(props){var _this;_classCallCheck(this,Projects);_this=_possibleConstructorReturn(this,_getPrototypeOf(Projects).call(this,props));_this.onSort=function(sortType){_this.setState({sortType:'desc'});};_this.state={projects:[],query:'',sortType:'asc'};_this.searchQuery=_this.searchQuery.bind(_assertThisInitialized(_this));_this.deleteProject=_this.deleteProject.bind(_assertThisInitialized(_this));_this.onSort=_this.onSort.bind(_assertThisInitialized(_this));return _this;}_createClass(Projects,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://localhost:4000/projects').then(function(response){_this2.setState({projects:response.data});console.log(\"Projects Mount here\"+JSON.stringify(response.data));}).catch(function(error){console.log(\"error \"+error);});}},{key:\"searchQuery\",value:function searchQuery(e){this.setState({query:e.target.value});}},{key:\"deleteProject\",value:function deleteProject(id){axios.delete('http://localhost:4000/projects/'+id).then(function(response){console.log(response.data);});this.setState({projects:this.state.projects.filter(function(el){return el._id!==id;})});}// onSort = (sortType) => {\n//     this.state.projects.sort((a,b) => {\n//         const isRev = (this.state.sortType === 'asc') ? 1 : -1;\n//         return isRev * a.projectName.localeCompare(b.projectName)\n//     })\n// } \n},{key:\"render\",value:function render(){var _this3=this;// const { user } = this.props.auth;\n// console.log(\"Auth here\" + JSON.stringify(user));\n// let toastMsg = document.createElement('toastMsg');\n// toastMsg.className()\nconsole.log(\"Data here\",this.state.projects);var sorted=this.state.projects.sort(function(a,b){var isReversed=_this3.state.sortType==='asc'?1:-1;return isReversed*a.projectName.localeCompare(b.projectName);});//Search query for project list items\nvar findQuery=sorted.filter(function(i){return i.projectName.toLowerCase().indexOf(_this3.state.query.toLowerCase())!==-1;});return React.createElement(\"div\",{className:\"container-fluid\"},React.createElement(\"ol\",{className:\"breadcrumb mb-3\"},React.createElement(\"li\",{className:\"breadcrumb-item active\"},React.createElement(\"strong\",null,\"Projects\"))),React.createElement(\"input\",{className:\"form-control mr-sm-2\",onChange:this.searchQuery,type:\"text\",placeholder:\"Search projects...\"}),React.createElement(\"table\",{className:\"table\",style:{marginTop:20}},React.createElement(\"thead\",null,React.createElement(\"tr\",null,React.createElement(\"th\",{onClick:function onClick(){return _this3.onSort('desc');}},\"Project Name\"),React.createElement(\"th\",null,\"Description\"),React.createElement(\"th\",null,\"Members\"),React.createElement(\"th\",null,\"Date Created\"),React.createElement(\"th\",null,\"Actions\"))),React.createElement(\"tbody\",null,findQuery.map(function(currentProject){return React.createElement(Project,{project:currentProject,bugsProject:currentProject.bugs_id,key:currentProject._id,deleteProject:_this3.deleteProject,date:currentProject.dateCreated.substring(0,10)});}))));}}]);return Projects;}(Component);export{Projects as default};","map":{"version":3,"sources":["/home/jasonw/Desktop/React/bugtracker/client/src/components/projects/projectlist.js"],"names":["React","Component","Link","axios","connect","Project","props","project","projectName","description","members","Intl","DateTimeFormat","year","month","day","format","Date","date","_id","deleteProject","Projects","onSort","sortType","setState","state","projects","query","searchQuery","bind","get","then","response","data","console","log","JSON","stringify","catch","error","e","target","value","id","delete","filter","el","sorted","sort","a","b","isReversed","localeCompare","findQuery","i","toLowerCase","indexOf","marginTop","map","currentProject","bugs_id","dateCreated","substring"],"mappings":"g/BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA;AAEA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAAAC,KAAK,QACjB,+BACI,8BAAKA,KAAK,CAACC,OAAN,CAAcC,WAAnB,CADJ,CAEI,8BAAMF,KAAK,CAACC,OAAN,CAAcE,WAApB,CAFJ,CAGI,8BAAMH,KAAK,CAACC,OAAN,CAAcG,OAApB,CAHJ,CAII,8BAAM,GAAIC,CAAAA,IAAI,CAACC,cAAT,CAAwB,OAAxB,CAAiC,CAC/BC,IAAI,CAAE,SADyB,CAE/BC,KAAK,CAAE,MAFwB,CAG/BC,GAAG,CAAE,SAH0B,CAAjC,EAICC,MAJD,CAIQ,GAAIC,CAAAA,IAAJ,CAASX,KAAK,CAACY,IAAf,CAJR,CAAN,CAJJ,CAUI,8BACA,oBAAC,IAAD,EAAM,EAAE,CAAE,aAAaZ,KAAK,CAACC,OAAN,CAAcY,GAArC,CAA0C,SAAS,CAAC,iBAApD,UADA,KACmF,oBAAC,IAAD,EAAM,EAAE,CAAE,kBAAkBb,KAAK,CAACC,OAAN,CAAcY,GAA1C,CAA+C,SAAS,CAAC,iBAAzD,aADnF,KAC8K,oBAAC,IAAD,EAAM,EAAE,CAAE,SAASb,KAAK,CAACC,OAAN,CAAcY,GAAjC,CAAsC,SAAS,CAAC,cAAhD,eAD9K,KAC+P,oBAAC,IAAD,EAAM,SAAS,CAAC,gBAAhB,CAAiC,OAAO,CAAE,kBAAM,CAAEb,KAAK,CAACc,aAAN,CAAoBd,KAAK,CAACC,OAAN,CAAcY,GAAlC,EAAwC,CAA1F,YAD/P,CAVJ,CADiB,EAArB,C,GAiBqBE,CAAAA,Q,kEACjB,kBAAYf,KAAZ,CAAmB,0CACf,0EAAMA,KAAN,GADe,MAiCnBgB,MAjCmB,CAiCV,SAACC,QAAD,CAAc,CACnB,MAAKC,QAAL,CAAc,CACVD,QAAQ,CAAE,MADA,CAAd,EAGH,CArCkB,CAGf,MAAKE,KAAL,CAAa,CACTC,QAAQ,CAAE,EADD,CAETC,KAAK,CAAE,EAFE,CAGTJ,QAAQ,CAAE,KAHD,CAAb,CAMA,MAAKK,WAAL,CAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB,CACA,MAAKT,aAAL,CAAqB,MAAKA,aAAL,CAAmBS,IAAnB,+BAArB,CACA,MAAKP,MAAL,CAAc,MAAKA,MAAL,CAAYO,IAAZ,+BAAd,CAXe,aAYlB,C,kFACmB,iBAChB1B,KAAK,CAAC2B,GAAN,CAAU,gCAAV,EACKC,IADL,CACU,SAAAC,QAAQ,CAAI,CACd,MAAI,CAACR,QAAL,CAAc,CACVE,QAAQ,CAAEM,QAAQ,CAACC,IADT,CAAd,EAEIC,OAAO,CAACC,GAAR,CAAY,sBAAwBC,IAAI,CAACC,SAAL,CAAeL,QAAQ,CAACC,IAAxB,CAApC,EACP,CALL,EAMKK,KANL,CAMW,SAASC,KAAT,CAAgB,CACnBL,OAAO,CAACC,GAAR,CAAY,SAAWI,KAAvB,EACH,CARL,EAUH,C,gDAEWC,C,CAAG,CACX,KAAKhB,QAAL,CAAc,CACVG,KAAK,CAAEa,CAAC,CAACC,MAAF,CAASC,KADN,CAAd,EAGH,C,oDASaC,E,CAAI,CACdxC,KAAK,CAACyC,MAAN,CAAa,kCAAkCD,EAA/C,EACKZ,IADL,CACU,SAAAC,QAAQ,CAAI,CAACE,OAAO,CAACC,GAAR,CAAYH,QAAQ,CAACC,IAArB,EAA2B,CADlD,EAGA,KAAKT,QAAL,CAAc,CACVE,QAAQ,CAAE,KAAKD,KAAL,CAAWC,QAAX,CAAoBmB,MAApB,CAA2B,SAAAC,EAAE,QAAIA,CAAAA,EAAE,CAAC3B,GAAH,GAAWwB,EAAf,EAA7B,CADA,CAAd,EAGH,CAGD;AACA;AACA;AACA;AACA;AACA;uCAES,iBAEL;AACA;AAEA;AACA;AAEAT,OAAO,CAACC,GAAR,CAAY,WAAZ,CAAyB,KAAKV,KAAL,CAAWC,QAApC,EAEA,GAAMqB,CAAAA,MAAM,CAAG,KAAKtB,KAAL,CAAWC,QAAX,CAAoBsB,IAApB,CAAyB,SAACC,CAAD,CAAGC,CAAH,CAAS,CAE7C,GAAMC,CAAAA,UAAU,CAAI,MAAI,CAAC1B,KAAL,CAAWF,QAAX,GAAwB,KAAzB,CAAkC,CAAlC,CAAsC,CAAC,CAA1D,CACA,MAAO4B,CAAAA,UAAU,CAAGF,CAAC,CAACzC,WAAF,CAAc4C,aAAd,CAA4BF,CAAC,CAAC1C,WAA9B,CAApB,CACH,CAJc,CAAf,CAOA;AACA,GAAI6C,CAAAA,SAAS,CAAGN,MAAM,CAACF,MAAP,CACR,SAAAS,CAAC,QAAIA,CAAAA,CAAC,CAAC9C,WAAF,CAAc+C,WAAd,GAA4BC,OAA5B,CAAoC,MAAI,CAAC/B,KAAL,CAAWE,KAAX,CAAiB4B,WAAjB,EAApC,IAAwE,CAAC,CAA7E,EADO,CAAhB,CAGA,MACI,4BAAK,SAAS,CAAC,iBAAf,EACA,0BAAI,SAAS,CAAC,iBAAd,EACA,0BAAI,SAAS,CAAC,wBAAd,EAAuC,6CAAvC,CADA,CADA,CAKI,6BACI,SAAS,CAAC,sBADd,CAEI,QAAQ,CAAE,KAAK3B,WAFnB,CAGI,IAAI,CAAC,MAHT,CAII,WAAW,CAAC,oBAJhB,EALJ,CAWI,6BAAO,SAAS,CAAC,OAAjB,CACI,KAAK,CAAE,CAAC6B,SAAS,CAAE,EAAZ,CADX,EAEQ,iCACI,8BACI,0BAAI,OAAO,CAAE,yBAAI,CAAA,MAAI,CAACnC,MAAL,CAAY,MAAZ,CAAJ,EAAb,iBADJ,CAEI,4CAFJ,CAGI,wCAHJ,CAII,6CAJJ,CAKI,wCALJ,CADJ,CAFR,CAWQ,iCACK+B,SAAS,CAACK,GAAV,CAAc,SAACC,cAAD,CAAmB,CAC9B,MAAO,qBAAC,OAAD,EAAS,OAAO,CAAEA,cAAlB,CACK,WAAW,CAAEA,cAAc,CAACC,OADjC,CAEK,GAAG,CAAED,cAAc,CAACxC,GAFzB,CAGK,aAAa,CAAE,MAAI,CAACC,aAHzB,CAIK,IAAI,CAAGuC,cAAc,CAACE,WAAhB,CAA6BC,SAA7B,CAAuC,CAAvC,CAAyC,EAAzC,CAJX,EAAP,CAMf,CAPY,CADL,CAXR,CAXJ,CADJ,CAqCH,C,sBAnHiC7D,S,SAAjBoB,Q","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom';\nimport axios from 'axios';\nimport { connect } from \"react-redux\";\nimport PropTypes from \"prop-types\";\n//import jwt from 'jsonwebtokens'\n\nconst Project = props => (\n    <tr>\n        <td>{props.project.projectName}</td>\n        <td >{props.project.description}</td>\n        <td >{props.project.members}</td>\n        <td >{new Intl.DateTimeFormat(\"en-GB\", {\n                year: \"numeric\",\n                month: \"long\",\n                day: \"2-digit\"\n            }).format(new Date(props.date))}</td>\n    \n        <td>\n        <Link to={\"/editProj/\"+props.project._id} className=\"btn btn-success\">Edit </Link> <Link to={\"/projects/bugs/\"+props.project._id} className=\"btn btn-primary\">Add bug </Link> <Link to={\"/bugs/\"+props.project._id} className=\"btn btn-info\"> View Bugs</Link> <Link className=\"btn btn-danger\" onClick={() => { props.deleteProject(props.project._id) }}> Delete</Link>\n        </td>\n        \n    </tr>\n)\nexport default class Projects extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            projects: [],\n            query: '',\n            sortType: 'asc'\n        };\n\n        this.searchQuery = this.searchQuery.bind(this);\n        this.deleteProject = this.deleteProject.bind(this);\n        this.onSort = this.onSort.bind(this);\n    }\n    componentDidMount() {\n        axios.get('http://localhost:4000/projects')\n            .then(response => {\n                this.setState({\n                    projects: response.data});\n                    console.log(\"Projects Mount here\" + JSON.stringify(response.data));\n            })\n            .catch(function(error) {\n                console.log(\"error \" + error)\n            })\n\n    }\n\n    searchQuery(e) {\n        this.setState({\n            query: e.target.value\n        })\n    }\n\n\n    onSort = (sortType) => {\n        this.setState({\n            sortType: 'desc'\n        })\n    }\n\n    deleteProject(id) {\n        axios.delete('http://localhost:4000/projects/'+id) \n            .then(response => {console.log(response.data)});\n\n        this.setState({\n            projects: this.state.projects.filter(el => el._id !== id)\n        })\n    }\n\n\n    // onSort = (sortType) => {\n    //     this.state.projects.sort((a,b) => {\n    //         const isRev = (this.state.sortType === 'asc') ? 1 : -1;\n    //         return isRev * a.projectName.localeCompare(b.projectName)\n    //     })\n    // } \n    \n    render() {\n\n        // const { user } = this.props.auth;\n        // console.log(\"Auth here\" + JSON.stringify(user));\n\n        // let toastMsg = document.createElement('toastMsg');\n        // toastMsg.className()\n\n        console.log(\"Data here\", this.state.projects);\n\n        const sorted = this.state.projects.sort((a,b) => {\n\n            const isReversed = (this.state.sortType === 'asc') ? 1 : -1;\n            return isReversed * a.projectName.localeCompare(b.projectName);\n        });\n\n\n        //Search query for project list items\n        let findQuery = sorted.filter(\n                i => i.projectName.toLowerCase().indexOf(this.state.query.toLowerCase()) !== -1);\n                \n        return (\n            <div className=\"container-fluid\">\n            <ol className=\"breadcrumb mb-3\">\n            <li className=\"breadcrumb-item active\"><strong>Projects</strong></li>\n        </ol>\n            \n                <input\n                    className=\"form-control mr-sm-2\"\n                    onChange={this.searchQuery}\n                    type=\"text\"\n                    placeholder=\"Search projects...\"\n                />\n                <table className=\"table\"\n                    style={{marginTop: 20 }}>\n                        <thead>\n                            <tr>\n                                <th onClick={()=>this.onSort('desc')}>Project Name</th>   \n                                <th>Description</th>\n                                <th>Members</th>\n                                <th>Date Created</th>\n                                <th>Actions</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            {findQuery.map((currentProject) =>{\n                                return <Project project={currentProject}\n                                            bugsProject={currentProject.bugs_id}\n                                            key={currentProject._id}\n                                            deleteProject={this.deleteProject}\n                                            date={(currentProject.dateCreated).substring(0,10)}\n                            />\n                })}\n                        </tbody>\n\n                    </table>\n            </div>\n        )\n    }\n}\n"]},"metadata":{},"sourceType":"module"}