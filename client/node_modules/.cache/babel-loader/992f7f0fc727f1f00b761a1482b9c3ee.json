{"ast":null,"code":"var _jsxFileName = \"/home/jasonw/Desktop/React/bugtracker/src/components/dashboard/Dashboard.js\";\nimport React, { Component } from \"react\";\nimport { Link, Route } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\";\nimport \"../layout/navbar.css\";\nimport Chart from \"../chart/chart\";\nimport axios from \"axios\";\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.onLogoutClick = e => {\n      e.preventDefault();\n      this.props.logoutUser();\n    };\n\n    this.state = {\n      projects: [],\n      bugs: []\n    };\n    this.getAssignedBugs = this.getAssignedBugs.bind(this);\n  }\n\n  componentDidMount() {\n    axios.get(\"http://localhost:4000/projects\").then(response => {\n      this.setState({\n        projects: response.data\n      });\n      console.log(\"Projects here\" + JSON.stringify(response.data));\n    }).then(axios.get('http://localhost:4000/bugs/').then(response => {\n      this.setState({\n        bugs: response.data\n      });\n      console.log(\"Bugs here\" + JSON.stringify(response.data));\n    })).catch(err => {\n      console.log(\"Error\", err);\n    });\n  }\n\n  render() {\n    function getAssignedBugs() {\n      var counts = {},\n          i,\n          value;\n      var result = [];\n\n      for (i = 0; i < this.state.bugs.length; i++) {\n        value = this.state.bugs[i].members;\n\n        if (typeof counts[value] === \"undefined\") {\n          counts[value] = 1;\n        } else {\n          counts[value]++;\n        }\n      }\n\n      Object.keys(counts).forEach((key, index) => {\n        result.push(`${key} ${counts[key]}`);\n      });\n      return result;\n    }\n\n    console.log(\"Get assigned bugs here\", this.getAssignedBugs);\n    const user = this.props.auth.user;\n    console.log(\"Auth here\" + JSON.stringify(user));\n    console.log(\"Name\", user.name);\n    var noOfProjects = [...new Set(this.state.projects.map(item => item.projectName))].length;\n    var noOfBugs = [...new Set(this.state.bugs.map(item => item._id))].length;\n    var highPriority = [...new Set(this.state.bugs.filter(item => item.priority === \"High\"))].length;\n    var noOfCompleted = [...new Set(this.state.bugs.filter(item => item.completed === true))].length;\n    let backgroundColor = ['rgba(255,99,132,0.6)', 'rgba(54,162,235,0.6)', 'rgba(255,206,86,0.6)', 'rgba(213,226,86,0.6)', 'rgba(189,126,86,0.6)'];\n    let labels = this.state.projects.map(i => i.projectName);\n    let data = this.state.projects.map(j => j.bugs.length);\n    let label = \"Number of bugs\";\n    let datasets = [];\n    datasets.push({\n      label,\n      data,\n      backgroundColor\n    });\n    let newChartData = {\n      labels,\n      datasets\n    }; // console.log(\"Project Name Labels\", labels);\n    // console.log(\"Project bug count\", datasets);\n    // console.log(\"New Chart Data \", newChartData);\n\n    return React.createElement(\"div\", {\n      className: \"container-fluid\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, React.createElement(\"ol\", {\n      className: \"breadcrumb mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"li\", {\n      className: \"breadcrumb-item active\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, \"Dashboard\"))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-xl-3 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card bg-danger text-white shadow mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, \"High Priority Bugs\"), React.createElement(\"div\", {\n      className: \"card-footer d-flex align-items-center justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"small text-white stretched-link\",\n      href: \"/buglist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, \"View Details\"), React.createElement(\"div\", {\n      className: \"large text-white display-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, highPriority)))), React.createElement(\"div\", {\n      className: \"col-xl-3 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card bg-primary text-white shadow mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, \"Total No Of Projects\"), React.createElement(\"div\", {\n      className: \"card-footer d-flex align-items-center justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"small text-white stretched-link\",\n      href: \"/projects\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"View Details\"), React.createElement(\"div\", {\n      className: \"large text-white align-items-center display-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, noOfProjects)))), React.createElement(\"div\", {\n      className: \"col-xl-3 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card bg-warning text-white shadow mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Total No. Of Bugs\"), React.createElement(\"div\", {\n      className: \"card-footer d-flex align-items-center justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"small text-white stretched-link\",\n      href: \"/buglist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, \"View Details\"), React.createElement(\"div\", {\n      className: \"large text-white display-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, noOfBugs)))), React.createElement(\"div\", {\n      className: \"col-xl-3 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card bg-success text-white shadow mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142\n      },\n      __self: this\n    }, \"Resolved Bugs\"), React.createElement(\"div\", {\n      className: \"card-footer d-flex align-items-center justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      className: \"small text-white stretched-link\",\n      href: \"/buglist\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, \"View Details\"), React.createElement(\"div\", {\n      className: \"large text-white display-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, noOfCompleted)))), React.createElement(\"div\", {\n      className: \"col-xl-3 col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card bg-success text-white shadow mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"card-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 152\n      },\n      __self: this\n    }, \"Assigned Bugs \"), React.createElement(\"div\", {\n      className: \"card-footer d-flex align-items-center justify-content-between\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 153\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"large text-white display-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, this.getAssignedBugs))))), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Chart, {\n      chartData: newChartData,\n      legendPosition: \"bottom\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    })));\n  }\n\n}\n\nDashboard.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n\nconst mapStateToProps = state => ({\n  auth: state.auth\n});\n\nexport default connect(mapStateToProps, {\n  logoutUser\n})(Dashboard);","map":{"version":3,"sources":["/home/jasonw/Desktop/React/bugtracker/src/components/dashboard/Dashboard.js"],"names":["React","Component","Link","Route","PropTypes","connect","logoutUser","Chart","axios","Dashboard","constructor","props","onLogoutClick","e","preventDefault","state","projects","bugs","getAssignedBugs","bind","componentDidMount","get","then","response","setState","data","console","log","JSON","stringify","catch","err","render","counts","i","value","result","length","members","Object","keys","forEach","key","index","push","user","auth","name","noOfProjects","Set","map","item","projectName","noOfBugs","_id","highPriority","filter","priority","noOfCompleted","completed","backgroundColor","labels","j","label","datasets","newChartData","propTypes","func","isRequired","object","mapStateToProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Link, Route } from \"react-router-dom\";\nimport PropTypes from \"prop-types\";\nimport { connect } from \"react-redux\";\nimport { logoutUser } from \"../../actions/authActions\"; \nimport \"../layout/navbar.css\";\nimport Chart from \"../chart/chart\";\n\nimport axios from \"axios\";\n\nclass Dashboard extends Component {\n  constructor(props) {\n      super(props);\n\n      this.state = {\n        projects: [],\n        bugs: []\n      }\n\n      this.getAssignedBugs = this.getAssignedBugs.bind(this);\n  }\n\n\n  componentDidMount() {\n    axios.get(\"http://localhost:4000/projects\")\n    .then(response => {\n        this.setState({\n        projects: response.data});\n        console.log(\"Projects here\" + JSON.stringify(response.data));\n        })\n        .then(axios.get('http://localhost:4000/bugs/')\n          .then(response => {\n                this.setState({\n                    bugs: response.data});\n                    console.log(\"Bugs here\" + JSON.stringify(response.data));\n            \n            }))\n    .catch(err => {\n        console.log(\"Error\",err);\n    })\n}\n\n  onLogoutClick = e => {\n      e.preventDefault();\n      this.props.logoutUser();\n  };\n\n\n\n  \n\n  render() {\n\n    function getAssignedBugs() {\n      var counts = {}, i, value;\n    \n      var result = [];\n    \n    for(i = 0; i < this.state.bugs.length;i++) {\n    \n        value = this.state.bugs[i].members;\n        if(typeof counts[value] === \"undefined\") {\n            counts[value] = 1;\n        } else {\n            counts[value]++;\n        }\n      }\n      \n        Object.keys(counts).forEach((key,index) => {\n          result.push(`${key} ${counts[key]}`);\n      })\n    \n      return result;\n    }\n\n    console.log(\"Get assigned bugs here\",this.getAssignedBugs);\n\n      const { user } = this.props.auth;\n      console.log(\"Auth here\" + JSON.stringify(user));\n      console.log(\"Name\",user.name);\n\n      var noOfProjects = [...new Set(this.state.projects.map(item => item.projectName))].length;\n      var noOfBugs = [...new Set(this.state.bugs.map(item => item._id))].length;\n\n      var highPriority = [...new Set(this.state.bugs.filter(item => item.priority === \"High\"))].length;\n      var noOfCompleted = [...new Set(this.state.bugs.filter(item => item.completed === true))].length;\n\n\n\n\n      let backgroundColor = ['rgba(255,99,132,0.6)','rgba(54,162,235,0.6)','rgba(255,206,86,0.6)','rgba(213,226,86,0.6)','rgba(189,126,86,0.6)'];\n      let labels = this.state.projects.map(i => i.projectName);\n      let data = this.state.projects.map(j => j.bugs.length);\n      let label = \"Number of bugs\";\n      let datasets = [];\n      datasets.push({label,data,backgroundColor});\n\n      let newChartData = {labels,datasets};\n\n      // console.log(\"Project Name Labels\", labels);\n      // console.log(\"Project bug count\", datasets);\n      // console.log(\"New Chart Data \", newChartData);\n\n  return (\n      <div className=\"container-fluid\">\n      \n        <ol className=\"breadcrumb mb-3\">\n          <li className=\"breadcrumb-item active\"><strong>Dashboard</strong></li>\n        </ol>\n        \n  \n        <div className=\"row\">\n        <div className=\"col-xl-3 col-md-6\">\n                                <div className=\"card bg-danger text-white shadow mb-4\">\n                                    <div className=\"card-body\">High Priority Bugs</div>\n                                    <div className=\"card-footer d-flex align-items-center justify-content-between\">\n                                        <a className=\"small text-white stretched-link\" href=\"/buglist\">View Details</a>\n                                        <div className=\"large text-white display-4\">{highPriority}</div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"col-xl-3 col-md-6\">\n                                <div className=\"card bg-primary text-white shadow mb-4\">\n                                    <div className=\"card-body\">Total No Of Projects</div>\n                                    <div className=\"card-footer d-flex align-items-center justify-content-between\">\n                                        <a className=\"small text-white stretched-link\" href=\"/projects\">View Details</a>\n                                        <div className=\"large text-white align-items-center display-4\">{noOfProjects}</div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"col-xl-3 col-md-6\">\n                                <div className=\"card bg-warning text-white shadow mb-4\">\n                                    <div className=\"card-body\">Total No. Of Bugs</div>\n                                    <div className=\"card-footer d-flex align-items-center justify-content-between\">\n                                        <a className=\"small text-white stretched-link\" href=\"/buglist\">View Details</a>\n                                        <div className=\"large text-white display-4\">{noOfBugs}</div>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"col-xl-3 col-md-6\">\n                                <div className=\"card bg-success text-white shadow mb-4\">\n                                    <div className=\"card-body\">Resolved Bugs</div>\n                                    <div className=\"card-footer d-flex align-items-center justify-content-between\">\n                                        <a className=\"small text-white stretched-link\" href=\"/buglist\">View Details</a>\n                                        <div className=\"large text-white display-4\">{noOfCompleted}</div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <div className=\"col-xl-3 col-md-6\">\n                                <div className=\"card bg-success text-white shadow mb-4\">\n                                    <div className=\"card-body\">Assigned Bugs </div>\n                                    <div className=\"card-footer d-flex align-items-center justify-content-between\">\n                                        \n                                        <div className=\"large text-white display-4\">{this.getAssignedBugs}</div>\n                                    </div>\n                                </div>\n                            </div>\n\n        </div>\n        <div className=\"col-md-6\">\n        \n            <Chart chartData={newChartData} legendPosition=\"bottom\"/>\n          \n        </div>\n          \n      </div>\n    );\n  }\n}\n\n  \n\nDashboard.propTypes = {\n  logoutUser: PropTypes.func.isRequired,\n  auth: PropTypes.object.isRequired\n};\n  const mapStateToProps = state => ({\n    auth: state.auth\n  });\n  export default connect(\n    mapStateToProps,\n    { logoutUser }\n  )(Dashboard);"]},"metadata":{},"sourceType":"module"}