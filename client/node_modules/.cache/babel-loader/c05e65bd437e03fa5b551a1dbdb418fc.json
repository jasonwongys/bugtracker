{"ast":null,"code":"import _classCallCheck from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/home/jasonw/Desktop/React/bugtracker/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,useState}from'react';import\"react-datepicker/dist/react-datepicker.css\";import axios from'axios';import Avatar from'react-avatar-edit';import{setUserLoading}from'../../actions/authActions';// function upload() {\n//     const [image, setImage] = useState('');\n//         const [loading, setLoading] = useState(false);\n//         const uploadImage = async e => {\n//             const files = e.target.files\n//             const data = new FormData()\n//             data.append('file',files[0])\n//             data.append('upload_preset','fahi8ukz')\n//             this.state.setLoading(true);\n//             const res = await fetch(\n//                 'https://api.cloudinary.com/v1_1/draeokkz7/image/upload',\n//                 {\n//                     method: 'POST',\n//                     body: data\n//                 }\n//             )\n//             const file = await res.json()\n//             setImage(file.secure_url)\n//             setLoading(false);\n//             console.log(\"Image uploaded\")\n//         }\n// }\nvar EditUsers=/*#__PURE__*/function(_Component){_inherits(EditUsers,_Component);function EditUsers(props){var _this;_classCallCheck(this,EditUsers);_this=_possibleConstructorReturn(this,_getPrototypeOf(EditUsers).call(this,props));_this.fileSelectedHandler=function(event){console.log(event);_this.setState({profileImg:event.target.files[0]});};_this.state={name:'',email:'',role:'',date:new Date(),profileImg:null,preview:null// image: '',\n// setImage: '',\n// loading: false,\n// setLoading: false\n};_this.onChangeName=_this.onChangeName.bind(_assertThisInitialized(_this));_this.onChangeEmail=_this.onChangeEmail.bind(_assertThisInitialized(_this));_this.onChangeRole=_this.onChangeRole.bind(_assertThisInitialized(_this));_this.onChangeDate=_this.onChangeDate.bind(_assertThisInitialized(_this));_this.onCrop=_this.onCrop.bind(_assertThisInitialized(_this));_this.onClose=_this.onClose.bind(_assertThisInitialized(_this));_this.onBeforeFileLoad=_this.onBeforeFileLoad.bind(_assertThisInitialized(_this));_this.onSubmitForm=_this.onSubmitForm.bind(_assertThisInitialized(_this));return _this;}// Get a single project record\n_createClass(EditUsers,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get('http://localhost:4000/api/users/'+this.props.match.params.id).then(function(res){_this2.setState({name:res.data.name,email:res.data.email,role:res.data.role,date:new Date(res.data.date)});console.log(\"retrieved info: \"+res.data);}).catch(function(error){console.log(\"Error \"+error);});}},{key:\"onChangeName\",value:function onChangeName(e){this.setState({name:e.target.value});}},{key:\"onChangeEmail\",value:function onChangeEmail(e){this.setState({email:e.target.value});}},{key:\"onChangeRole\",value:function onChangeRole(e){this.setState({role:e.target.value});}},{key:\"onChangeDate\",value:function onChangeDate(date){this.setState({date:date});}},{key:\"onClose\",value:function onClose(){this.setState({preview:null});}},{key:\"onCrop\",value:function onCrop(preview){this.setState({preview:preview});}},{key:\"onBeforeFileLoad\",value:function onBeforeFileLoad(elem){if(elem.target.files[0].size>71680){alert(\"File is too big!\");elem.target.value=\"\";};}// fileUploadHandler = () = {\n//     axios\n// }\n},{key:\"onSubmitForm\",value:function onSubmitForm(e){e.preventDefault();console.log(\"form submitted\");console.log(\"name: \".concat(this.state.name));console.log(\"date: \".concat(this.state.date));console.log(\"email: \".concat(this.state.email));console.log(\"role: \".concat(this.state.role));var updatedUser={name:this.state.name,email:this.state.email,role:this.state.role,date:this.state.date,profileImg:this.state.preview};//Update a new project\naxios.patch('http://localhost:4000/api/users/'+this.props.match.params.id,updatedUser).then(function(res){return console.log(res.data);},this.props.history.push(\"/usersList\"));}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"container\"},React.createElement(\"h3\",null,\"Update a User\"),React.createElement(\"div\",{style:{marginTop:20}},React.createElement(\"form\",{onSubmit:this.onSubmitForm},React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Name: \"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",value:this.state.name,onChange:this.onChangeName})),React.createElement(\"br\",null),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Role: \"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",value:this.state.role,onChange:this.onChangeRole})),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"label\",null,\"Email: \"),React.createElement(\"input\",{type:\"text\",className:\"form-control\",value:this.state.email,onChange:this.onChangeEmail})),React.createElement(\"div\",{className:\"form-group\"}),React.createElement(\"div\",{className:\"form-group\"},React.createElement(\"input\",{type:\"submit\",value:\"Update User\",className:\"btn btn-primary\"})))));}}]);return EditUsers;}(Component);export{EditUsers as default};","map":{"version":3,"sources":["/home/jasonw/Desktop/React/bugtracker/client/src/components/usersProfile/editUsers.component.js"],"names":["React","Component","useState","axios","Avatar","setUserLoading","EditUsers","props","fileSelectedHandler","event","console","log","setState","profileImg","target","files","state","name","email","role","date","Date","preview","onChangeName","bind","onChangeEmail","onChangeRole","onChangeDate","onCrop","onClose","onBeforeFileLoad","onSubmitForm","get","match","params","id","then","res","data","catch","error","e","value","elem","size","alert","preventDefault","updatedUser","patch","history","push","marginTop"],"mappings":"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","sourcesContent":["import React, { Component, useState } from 'react'\nimport \"react-datepicker/dist/react-datepicker.css\";\nimport axios from 'axios';\nimport Avatar from 'react-avatar-edit'\nimport { setUserLoading } from '../../actions/authActions';\n\n// function upload() {\n\n//     const [image, setImage] = useState('');\n//         const [loading, setLoading] = useState(false);\n\n//         const uploadImage = async e => {\n//             const files = e.target.files\n//             const data = new FormData()\n//             data.append('file',files[0])\n//             data.append('upload_preset','fahi8ukz')\n//             this.state.setLoading(true);\n//             const res = await fetch(\n//                 'https://api.cloudinary.com/v1_1/draeokkz7/image/upload',\n//                 {\n//                     method: 'POST',\n//                     body: data\n//                 }\n    \n//             )\n//             const file = await res.json()\n    \n//             setImage(file.secure_url)\n//             setLoading(false);\n//             console.log(\"Image uploaded\")\n//         }\n\n// }\n\nexport default class EditUsers extends Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            name: '',\n            email: '',\n            role: '',\n            date: new Date(),\n            profileImg: null,\n            preview: null,\n            // image: '',\n            // setImage: '',\n            // loading: false,\n            // setLoading: false\n\n        }\n\n       \n        \n        this.onChangeName = this.onChangeName.bind(this);\n        this.onChangeEmail = this.onChangeEmail.bind(this);\n        this.onChangeRole = this.onChangeRole.bind(this);\n        this.onChangeDate = this.onChangeDate.bind(this);\n        \n        this.onCrop = this.onCrop.bind(this);\n        this.onClose = this.onClose.bind(this);\n        this.onBeforeFileLoad = this.onBeforeFileLoad.bind(this);\n        this.onSubmitForm = this.onSubmitForm.bind(this);\n        \n    }\n// Get a single project record\n    componentDidMount() {\n\n        axios.get('http://localhost:4000/api/users/'+this.props.match.params.id)\n            .then(res => {\n                this.setState({\n                    name: res.data.name,\n                    email: res.data.email,\n                    role: res.data.role,\n                    date: new Date(res.data.date)\n                })\n                console.log(\"retrieved info: \" +res.data)\n            })\n            .catch(function(error) {\n                console.log(\"Error \" + error)\n            })\n    }\n\n    onChangeName(e) {\n        this.setState({\n            name: e.target.value\n        });\n    }\n\n\n    onChangeEmail(e) {\n        this.setState({\n            email: e.target.value\n        });\n    }\n\n    onChangeRole(e) {\n        this.setState({\n            role: e.target.value\n        });\n    }\n\n    onChangeDate(date) {\n\n        this.setState({\n            date: date\n        });\n    }\n\n    fileSelectedHandler = event => {\n        console.log(event)\n        this.setState({\n            profileImg: event.target.files[0]\n            \n        })\n        \n    }\n    onClose() {\n        this.setState({preview: null})\n        }\n        \n        onCrop(preview) {\n            this.setState({preview})\n        }\n        \n        onBeforeFileLoad(elem) {\n            if(elem.target.files[0].size > 71680){\n            alert(\"File is too big!\");\n            elem.target.value = \"\";\n            };\n        }\n\n    // fileUploadHandler = () = {\n    //     axios\n    // }\n\n    onSubmitForm(e) {\n        e.preventDefault();\n\n        console.log(\"form submitted\");\n        console.log(`name: ${this.state.name}`);\n        console.log(`date: ${this.state.date}`);\n        console.log(`email: ${this.state.email}`);\n        console.log(`role: ${this.state.role}`);\n\n        const updatedUser = {\n            name: this.state.name,\n            email: this.state.email,\n            role: this.state.role,\n            date: this.state.date,\n            profileImg: this.state.preview\n\n        }\n\n        \n\n\n        //Update a new project\n        axios.patch('http://localhost:4000/api/users/'+this.props.match.params.id,updatedUser)\n            .then(res => console.log(res.data),\n            this.props.history.push(\"/usersList\"));\n            \n    \n\n    }\n\n\n    render() {\n\n        \n        \n        return (\n            <div className=\"container\">\n                <h3>Update a User</h3>\n                <div style={{marginTop: 20}}>\n                    <form onSubmit={this.onSubmitForm}>\n                        <div className=\"form-group\">\n                            <label>Name: </label>\n                            <input type=\"text\"\n                                    className=\"form-control\"\n                                    value={this.state.name}\n                                    onChange={this.onChangeName}\n                                />\n                        </div>\n\n\n                        <br />\n                        <div className=\"form-group\">\n                            <label>Role: </label>\n                            <input type=\"text\"\n                                    className=\"form-control\"\n                                    value={this.state.role}\n                                    onChange={this.onChangeRole}\n                                />\n                        </div>\n                        \n            \n\n                        <div className=\"form-group\">\n                            <label>Email: </label>\n                            <input type=\"text\"\n                                    className=\"form-control\"\n                                    value={this.state.email}\n                                    onChange={this.onChangeEmail}\n                                />\n                        </div>\n\n                        {/* <div className=\"form-group\">\n                            <label>Upload a Profile Image:</label>\n                            <br />\n                            <input type=\"file\" \n                                \n                                onChange={this.fileSelectedHandler} />\n                            \n                        </div> */}\n                        <div className=\"form-group\">\n\n                        \n                        {/* <Avatar\n                            width={250}\n                            height={250}\n                            onCrop={this.onCrop}\n                            onClose={this.onClose}\n                            onBefore={this.onBeforeFileLoad}\n                            profileImg={this.state.profileImg}\n                        />\n                            <img src={this.state.preview} alt=\"Preview\" />\n                         */}\n                        </div>\n{/* \n                        <input type=\"file\"\n                                placeholder=\"Upload an image\"\n                                name=\"file\"\n                                onChange={uploadImage} />\n\n                        {loading ? (\n                            <h3>Loading....</h3>\n                        ): (<img src={image} style={{width: '200px'}} />\n                        )} */}\n\n                        <div className=\"form-group\">\n                            <input type=\"submit\" value=\"Update User\" className=\"btn btn-primary\" />\n                        </div>\n                        \n                    </form>\n                    \n                </div>\n            </div>\n        )\n    }\n}"]},"metadata":{},"sourceType":"module"}